---
import Shape from "./Shapes.astro";
---

<div class="header-shapes">
  <div class="container">
    <div class="origin" />
    <Shape
      client:load uniqueId="circle1"
      width="13em" tx="-1em" ty="-5em"
      theta="0deg"
      fill="rgba(169, 255, 198, 0.5)"
      colorHalo1="#68C6CC"
      colorHalo2="#68C6CC"
    >
      <circle id="circle1-path" cx="0.5" cy="0.5" r="0.5" />
    </Shape>
    <Shape
      client:load uniqueId="triangle1"
      width="20em" tx="-10em" ty="10em"
      theta="100deg"
      fill="#C8F1F399"
      colorHalo1="#68C6CC"
      colorHalo2="#68C6CC"
    >
      <polygon id="triangle1-path" points="0.5 0.2, 1 1, 0 1"></polygon>
    </Shape>
    <Shape
      client:load uniqueId="rect1"
      width="10em" tx="-13em" ty="16em"
      theta="0deg"
      fill="#E7C3F2aa"
      colorHalo1="#ff0"
      colorHalo2="#D067B5"
    >
      <rect id="rect1-path" width="100%" height="100%" />
    </Shape>
    <!-- <Shape client:load uniqueId="testshape2" tx="5em" ty="-1em" fill="#00f6"/> -->
  <svg
    viewBox="0 0 100 100"
    preserveAspectRatio="xMinYMin"
    class="pink-oval"
    aria-hidden="true"
  >
    <defs>
      <filter id="pink-oval-shadow">
        <feGaussianBlur in="SourceGraphic" stdDeviation="10" />
        <feOffset dy="-10" dx="-10" />
        <feComposite
          in2="SourceGraphic"
          operator="arithmetic"
          k2="-1"
          k3="1"
          result="firstShadow"
        />
        <!-- <feFlood flood-color="#F2958E" /> -->
        <feFlood flood-color="#73c892" />
        <feComposite in2="firstShadow" operator="in"></feComposite>
        <feComposite
          in2="SourceGraphic"
          operator="over"
          result="firstShadow"></feComposite></filter
        >
      </defs>
    <circle
      cx="50"
      cy="50"
      r="50"
      filter="url(#pink-oval-shadow)"
      fill= "rgba(169, 255, 198, 0.54)"
    />
    </svg>
    <svg viewBox="0 0 100 100" preserveAspectRatio="xMinYMin" class="magenta-rectangle" aria-hidden="true">
      <defs>
        <filter id="magenta-rectangle-shadow">
          <feGaussianBlur in="SourceAlpha" stdDeviation="23" />
          <feOffset dy="5" dx="5" result="firstOffsetBlur" />
          <feComposite in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowDiff" />
          <feFlood flood-color="#ff0" />
          <feComposite in2="shadowDiff" operator="in" />
          <feComposite in2="SourceGraphic" operator="over" result="firstShadow" />
          <feGaussianBlur in="firstShadow" stdDeviation="23" />
          <feOffset dy="-5" dx="-5" />
          <feComposite in2="firstShadow" operator="arithmetic" k2="-1" k3="1" result="shadowDiff" />
          <feFlood flood-color="#D067B5"/>
          <feComposite in2="shadowDiff" operator="in" />
          <feComposite in2="firstShadow" operator="over">
        </filter>
      </defs>
      <rect width="100%" height="100%" filter="url(#magenta-rectangle-shadow)" fill="#E7C3F2" />
    </svg>
    <svg viewBox="0 0 100 100" preserveAspectRatio="xMinYMin" class="cyan-triangle" aria-hidden="true">
      <defs>
        <filter id="cyan-triangle-shadow">
          <feGaussianBlur in="SourceAlpha" stdDeviation="30" result="blur"></feGaussianBlur>
          <feComposite in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowDiff"></feComposite>
          <feFlood flood-color="#68C6CC"></feFlood>
          <feComposite in2="shadowDiff" operator="in"></feComposite>
          <feComposite in2="SourceGraphic" operator="over" result="firstShadow"></feComposite>
          <feGaussianBlur in="firstShadow" stdDeviation="15"></feGaussianBlur>
          <feOffset dy="-7" dx="-12"></feOffset>
          <feComposite in2="firstShadow" operator="arithmetic" k2="-1" k3="1" result="shadowDiff"></feComposite>
          <feFlood flood-color="#68C6CC"></feFlood>
          <feComposite in2="shadowDiff" operator="in"></feComposite>
          <feComposite in2="firstShadow" operator="over"></feComposite>
        </filter>
      </defs>
      <polygon id="cyan-triangle" points="50 20, 100 100, 0 100" filter="url(#cyan-triangle-shadow)" fill="#C8F1F3"></polygon>
    </svg>
  </div>
</div>

<style>
/* ---- center horizontally ---- */

.header-shapes {
  position: relative;
  margin: 0 auto;
  max-width: var(--max-width);
}

.header-shapes .container {
  /* all children will be absolutely positioned, so .container will have no width
   * or height.  We just want to set its "origin" to be the center of its parent. */
  position: absolute;
  left: 50%;
}

/* ---- individual shape styles ---- */

.pink-oval {
  position: absolute;
  width: 30rem;
  transform: translate(-31.5em, -23.5em);
  opacity: 0.8;
  z-index: -1;
}
.magenta-rectangle {
  position: absolute;
  width: 25rem;
  /* transform: translate(180%, -100%) rotate(-12deg); */
  transform: translate(8em, -20em) rotate(-12deg);
  opacity: 0.9;
  z-index: -1;
}
.cyan-triangle {
  position: absolute;
  width: 18rem;
  transform: translate(-9em, -7em) rotate(134deg);
  opacity: 0.7;
  z-index: -1;
  /* clip-path: url(#cyanTriangle);
  backdrop-filter: blur(20px); */
}

/* ---- origin point for debug ---- */

.origin {
  position: absolute;
  width: 1em;
  height: 1em;
  top: 0;
  left: 0;
  border-top: 2px solid black;
  border-left: 2px solid black;
}

/* ---- flexbox solution ---- */

/* .header-shapes {
  display: flex;
  flex-direction: row;
  justify-content: center;
  
  margin: 0 auto;
  max-width: var(--max-width);
}

.header-shapes .container {
  flex: 1 0 var(--max-width);
  margin: 0 auto;
  position: relative;
  margin: 0 auto;
} */
</style>