---
title: Hindley-Milner Type Inference
summary: 'DESCRIPTION'
datePublished: '4 May 2024'

series:
  seriesId: breadcrumbs-type-safari
  seriesNumber: 4
---

import { InlineType } from "@components/type-safari";

import PostContent from "@components/blog/PostContent.astro";
import SeriesSummary from "@components/content/SeriesSummary.astro";

<SeriesSummary />

## Supporting Type Annotations

As discussed by [@jones2007:practical-arbitrary-rank], <ExactQuote>The term $(t :: \sigma)$ is a term $t$ that has been annotated by the programmer with a polytope $\sigma$.</ExactQuote>  We introduce a new **shallow subsumption** judgement $\vdash_{sh}$ to capture the "more polymorphic than" relation, which is needed to check type annotation.  <ExactQuote>The rule `Annot` checks a type-annotated term in three stages:</ExactQuote>

* Find $t$'s most general type $\sigma'$ using $\vdash_{poly}$.
* This type might differ from the programmer-supplied annotation, which may not be $t$'s most general type.  So, we must use the $\vdash_{sh}$ relation to check that $\sigma'$ is at least as polymorphic as $\sigma$.
* Finally, instantiate $\sigma$, using $\vdash_{inst}$.